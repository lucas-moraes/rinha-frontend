const root=document.getElementById("json-tree"),itemsPerPage=50;let i=0,j,startIndex=0,endIndex=50,scrollStep=0;document.getElementById("file-input").addEventListener("change",FileUpload),root.addEventListener("scroll",()=>{root.scrollTop>root.offsetHeight+scrollStep&&(scrollStep=root.scrollTop,JsonManager())});class DataObject{constructor(){this.data={}}get(){return this.data}set(e){this.data=e}}const dataObject=new DataObject;function FileUpload(e){let t=e.target.files[0];document.getElementById("jsonName").textContent=t.name;let a=DeleteOldDatas();a&&function e(){if(t){let a=new FileReader;a.onload=e=>{let t=e.target.result,a=JSON.parse(t);dataObject.set(a),JsonManager()},a.readAsText(t)}}()}function JsonManager(){let e=dataObject.get();Array.isArray(e)&&(e={data:e}),document.getElementById("initial").style.display="none",document.getElementById("results").style.display="flex",Object.entries(e).forEach(t=>{if("object"==typeof t[1]||Array.isArray(t[1])||CreateChild(t[0],null,t[1]),"object"==typeof t[1]){let a=e;Array.isArray(t[1])&&(a=t[1].slice(startIndex,endIndex),startIndex=endIndex,endIndex+=50),TraverseJSON(a,root)}})}function TraverseJSON(e,t){for(let a in e){let n=e[a];if("object"==typeof n){let r=CreateParent(a,i,n);j=t.appendChild(r),i++,TraverseJSON(n,r)}"object"!=typeof n&&CreateChild(a,j,n)}}function CreateParent(e,t,a){let n=document.createElement("details");n.open=!0;let r=document.createElement("summary");return r.classList.add(`parent-${t}`),r.style.color="#4E9590",r.textContent=`${e}: `,n.appendChild(r),n}function CreateChild(e,t,a){let n=document.createElement("p");n.classList.add(`child-${i-1}`),n.innerHTML=`<b>${e}: </b><i>${a}</i>`,t||(t=root),t.appendChild(n)}function DeleteOldDatas(){return root.querySelectorAll("details").forEach(e=>{e.remove()}),root.querySelectorAll("p").forEach(e=>{e.remove()}),!0}